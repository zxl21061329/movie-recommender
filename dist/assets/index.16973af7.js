var oe=Object.defineProperty,ae=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var U=(e,t,a)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,T=(e,t)=>{for(var a in t||(t={}))le.call(t,a)&&U(e,a,t[a]);if(W)for(var a of W(t))ue.call(t,a)&&U(e,a,t[a]);return e},G=(e,t)=>ae(e,re(t));import{a as x,b as k,c as V,d as ie,t as ce}from"./index.579f9528.js";import{f as v,c as X,a as z,b as N,l as c,q as i,t as _,x as p,y as f,T as de,L as he,M as pe,N as H,O as K,C as h,G as $,A as g,P as I,Q as S,F as M,D as E,r as w,I as q,o as fe,E as me,R as Q,H as C,S as ge,n as D,U as _e,B as be}from"./element-plus.82ea873e.js";var O=v({name:"LayoutContent",setup(){const e=x(),{getSetting:t,getTags:a}=k(),s=X(()=>e.path);let r=z({cachedViews:[...a.cachedViews]});return N(()=>a.cachedViews.length,()=>r.cachedViews=[...a.cachedViews]),{key:s,data:r,setting:t}}});const ve=e=>(H("data-v-4cba26f8"),e=e(),K(),e),we=ve(()=>h("div",null,[h("i",{class:"el-icon-caret-top"})],-1));function ye(e,t,a,s,r,u){const n=c("router-view"),l=c("el-backtop"),o=c("el-scrollbar");return i(),_(o,null,{default:p(()=>[f(n,null,{default:p(({Component:d})=>[f(de,{name:"fade-transform",mode:"out-in"},{default:p(()=>[(i(),_(he,{include:e.setting.showTags?e.data.cachedViews:[]},[(i(),_(pe(d),{key:e.key,class:"page m-3 relative"}))],1032,["include"]))]),_:2},1024)]),_:1}),f(l,{target:".layout-main-content>.el-scrollbar>.el-scrollbar__wrap",bottom:15,right:15},{default:p(()=>[we]),_:1})]),_:1})}O.render=ye;O.__scopeId="data-v-4cba26f8";var Y=v({name:"MenubarItem",props:{menuList:{type:Object,default:()=>({})}},setup(){return{}}});function ke(e,t,a,s,r,u){const n=c("menubar-item",!0),l=c("el-menu-item-group"),o=c("el-sub-menu"),d=c("el-menu-item");return e.menuList.children&&e.menuList.children.length>0?(i(),_(o,{key:e.menuList.path,index:e.menuList.path},{title:p(()=>[h("span",null,$(e.menuList.meta.title),1)]),default:p(()=>[f(l,null,{default:p(()=>[(i(!0),g(S,null,I(e.menuList.children,m=>(i(),_(n,{key:m.path,index:m.path,"menu-list":m},null,8,["index","menu-list"]))),128))]),_:1})]),_:1},8,["index"])):(i(),_(d,{key:e.menuList.path,index:e.menuList.path},{title:p(()=>[M($(e.menuList.meta.title),1)]),_:1},8,["index"]))}Y.render=ke;const $e=e=>{const t=a=>{let s=[];return a.filter(r=>!r.meta.hidden).forEach(r=>{let u=r.children&&r.children.filter(l=>!l.meta.hidden),n=r;!r.meta.alwaysShow&&u&&u.length===1&&([n]=u),s.push(n),n.children&&n.children.length>0&&(s[s.length-1].children=t(n.children))}),s};return t(e)};var A=v({name:"LayoutMenubar",components:{MenubarItem:Y},setup(){const e=x(),t=V(),{getMenubar:a,setRoutes:s,changeCollapsed:r,getSetting:u}=k(),n=$e(a.menuList);s(n);const l=X(()=>e.meta.activeMenu?e.meta.activeMenu:e.path);return{getMenubar:a,filterMenubarData:n,activeMenu:l,onOpenChange:d=>{t.push({path:d}),a.status===2&&r()},getSetting:u}}});function Se(e,t,a,s,r,u){const n=c("menubar-item"),l=c("el-menu");return i(),_(l,{mode:e.getMenubar.isPhone?"vertical":e.getSetting.mode,"default-active":e.activeMenu,collapse:e.getMenubar.status===1||e.getMenubar.status===3,class:E({"el-menu-vertical-demo":!0,"w-64":e.getMenubar.status===0||e.getMenubar.status===2,"w-0":e.getMenubar.status===3,"w-16":e.getMenubar.status===1,"w-full":e.getSetting.mode==="horizontal"&&!e.getMenubar.isPhone}),"collapse-transition":!1,"unique-opened":!0,onSelect:e.onOpenChange},{default:p(()=>[(i(!0),g(S,null,I(e.filterMenubarData,o=>(i(),_(n,{key:o.path,index:o.path,"menu-list":o},null,8,["index","menu-list"]))),128))]),_:1},8,["mode","default-active","collapse","class","onSelect"])}A.render=Se;var J={exports:{}};/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/(function(e){(function(){var t=typeof window!="undefined"&&typeof window.document!="undefined"?window.document:{},a=e.exports,s=function(){for(var n,l=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,d=l.length,m={};o<d;o++)if(n=l[o],n&&n[1]in t){for(o=0;o<n.length;o++)m[l[0][o]]=n[o];return m}return!1}(),r={change:s.fullscreenchange,error:s.fullscreenerror},u={request:function(n,l){return new Promise(function(o,d){var m=function(){this.off("change",m),o()}.bind(this);this.on("change",m),n=n||t.documentElement;var b=n[s.requestFullscreen](l);b instanceof Promise&&b.then(m).catch(d)}.bind(this))},exit:function(){return new Promise(function(n,l){if(!this.isFullscreen){n();return}var o=function(){this.off("change",o),n()}.bind(this);this.on("change",o);var d=t[s.exitFullscreen]();d instanceof Promise&&d.then(o).catch(l)}.bind(this))},toggle:function(n,l){return this.isFullscreen?this.exit():this.request(n,l)},onchange:function(n){this.on("change",n)},onerror:function(n){this.on("error",n)},on:function(n,l){var o=r[n];o&&t.addEventListener(o,l,!1)},off:function(n,l){var o=r[n];o&&t.removeEventListener(o,l,!1)},raw:s};if(!s){a?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(u,{isFullscreen:{get:function(){return Boolean(t[s.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[s.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[s.fullscreenEnabled])}}}),a?e.exports=u:window.screenfull=u})()})(J);var y=J.exports,Z=v({name:"Screenfull",setup(){const e=w(!1),t=()=>{y.isEnabled?y.toggle():me({message:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F",type:"warning"})},a=()=>{y.isEnabled&&(e.value=y.isFullscreen)};return q(()=>y.isEnabled&&y.on("change",a)),fe(()=>y.isEnabled&&y.off("change",a)),{isFullscreen:e,changeScreenfull:t}}});const Me={class:"hidden-xs-only px-2"};function Ce(e,t,a,s,r,u){const n=c("svg-icon");return i(),g("div",Me,[e.isFullscreen?(i(),_(n,{key:1,"class-name":"cursor-pointer","icon-class":"svg-exit-fullscreen",onClick:e.changeScreenfull},null,8,["onClick"])):(i(),_(n,{key:0,"class-name":"cursor-pointer","icon-class":"svg-fullscreen",onClick:e.changeScreenfull},null,8,["onClick"]))])}Z.render=Ce;const Ee=e=>{const t=V(),a=w(""),s=w(!1),r=w(),u=()=>{s.value=!s.value,s.value&&r.value&&r.value.focus()},n=()=>{a.value="",e.value.splice(0,e.value.length),s.value=!1};return N(s,o=>{o?document.body.addEventListener("click",n):document.body.removeEventListener("click",n)}),{href:a,changeRoute:()=>{t.push({name:"Detail",params:{id:a.value}})},changeStatus:u,isShow:s,elSelect:r,hideSearch:n}};var B=v({name:"Search",setup(){const e=w([]);return T({searchList:e,searchText:async a=>{a!==""?ie.post("search_movies/",{keyword:a}).then(s=>{e.value=s.data.Data}):e.value=[]}},Ee(e))}});const Le={class:"layout-navbar-search-select"};function Fe(e,t,a,s,r,u){const n=c("svg-icon"),l=c("el-option"),o=c("el-select");return i(),g("div",{class:E(["layout-navbar-search hidden-xs-only cursor-pointer flex flex-center px-2",{open:e.isShow}])},[f(n,{"class-name":"svg-icon","icon-class":"svg-search",onClick:Q(e.changeStatus,["stop"])},null,8,["onClick"]),h("div",Le,[f(o,{ref:"elSelect",modelValue:e.href,"onUpdate:modelValue":t[0]||(t[0]=d=>e.href=d),filterable:"",placeholder:"\u641C\u7D22\u7535\u5F71...",remote:"","remote-method":e.searchText,onChange:e.changeRoute},{default:p(()=>[(i(!0),g(S,null,I(e.searchList,d=>(i(),_(l,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","onChange"])])],2)}B.render=Fe;B.__scopeId="data-v-e673eac8";var ee="/assets/icon.de332703.png";const Te=e=>{const t=()=>{const s=[],r=["Dashboard","RedirectPage"];return e.matched[0]&&r.includes(e.matched[0].name)||e.matched.forEach(u=>{const n={title:u.meta.title,path:u.path};s.push(n)}),s};let a=z({breadcrumbList:t()});return N(()=>e.path,()=>a.breadcrumbList=t()),{data:a}};var j=v({name:"LayoutNavbar",components:{Search:B,Screenfull:Z,LayoutMenubar:A},setup(){const{getMenubar:e,getUserInfo:t,changeCollapsed:a,logout:s,getSetting:r,loginRequired:u}=k(),n=x();return G(T({loginRequired:u,getMenubar:e,userInfo:t,changeCollapsed:a,logout:s},Te(n)),{getSetting:r,icon:ee})}});const xe=e=>(H("data-v-bf2afd5c"),e=e(),K(),e),Ie={key:0,class:"flex items-center px-4 flex-wrap h-12 leading-12"},Pe={class:"px-4"},Ne=M("\u4E3B\u9875"),Re={key:1,class:"flex items-center px-4 flex-wrap h-12 flex-1"},Ve={class:"layout-sidebar-logo flex relative shadow-lg w-60 leading-12 items-center"},ze=["src"],qe={key:0,class:"pl-2"},De={class:"layout-sidebar-menubar flex flex-1 overflow-hidden"},Oe={class:"flex items-center flex-row-reverse px-4 min-width-32"},Ae={class:"el-dropdown-link flex flex-center px-2"},Be={class:"ml-2"},je=xe(()=>h("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)),We=M("\u4E2A\u4EBA\u4E2D\u5FC3"),Ue=M("\u524D\u5F80\u540E\u53F0"),Ge=M("\u9000\u51FA\u767B\u5F55");function Xe(e,t,a,s,r,u){const n=c("el-breadcrumb-item"),l=c("el-breadcrumb"),o=c("layout-menubar"),d=c("router-link"),m=c("el-dropdown-item"),b=c("el-link"),L=c("el-dropdown-menu"),R=c("el-dropdown"),P=c("Screenfull"),se=c("Search");return i(),g(S,null,[e.getSetting.mode==="vertical"||e.getMenubar.isPhone?(i(),g("div",Ie,[h("span",{class:E(["text-2xl cursor-pointer h-12 leading-12",{"el-icon-s-fold":!e.getMenubar.status,"el-icon-s-unfold":e.getMenubar.status}]),onClick:t[0]||(t[0]=(...F)=>e.changeCollapsed&&e.changeCollapsed(...F))},null,2),h("div",Pe,[f(l,{separator:"/"},{default:p(()=>[f(ge,{name:"breadcrumb"},{default:p(()=>[f(n,{key:"/",to:{path:"/"}},{default:p(()=>[Ne]),_:1}),(i(!0),g(S,null,I(e.data.breadcrumbList,F=>(i(),_(n,{key:F.path,to:F.path},{default:p(()=>[M($(F.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),_:1})])])):(i(),g("div",Re,[h("div",Ve,[h("img",{class:"w-8 h-8",src:e.icon},null,8,ze),e.getMenubar.status===0||e.getMenubar.status===2?(i(),g("span",qe,$(e.ImportMetaEnv.VITE_APP_TITLE),1)):C("",!0)]),h("div",De,[f(o)])])),h("div",Oe,[f(R,null,{dropdown:p(()=>[f(L,null,{default:p(()=>[f(m,null,{default:p(()=>[f(d,{to:"/Personal"},{default:p(()=>[We]),_:1})]),_:1}),f(m,{divided:""},{default:p(()=>[f(b,{target:"_blank",underline:!1,href:"http://127.0.0.1:8000/admin"},{default:p(()=>[Ue]),_:1})]),_:1}),e.loginRequired?(i(),_(m,{key:0,divided:"",onClick:e.logout},{default:p(()=>[Ge]),_:1},8,["onClick"])):C("",!0)]),_:1})]),default:p(()=>[h("span",Ae,[h("span",Be,$(e.loginRequired?e.userInfo.name:"\u9009\u9879"),1),je])]),_:1}),f(P),f(se)])],64)}j.render=Xe;j.__scopeId="data-v-bf2afd5c";const He=()=>{const{removeOtherTagNav:e}=k(),t=x(),a=V(),s=z({left:"0px",top:"0px",display:"none"}),r=w(null);let u;const n=(d,m)=>{u=d,s.display="block",D(()=>{var P;if(!r.value)return;const b=(P=r.value)==null?void 0:P.parentNode;let L=m.clientX-b.offsetLeft-5,R=m.clientY-b.offsetTop+10;m.clientX+r.value.offsetWidth>document.body.offsetWidth&&(L=L-r.value.offsetWidth+15),s.left=`${L}px`,s.top=`${R}px`})},l=()=>{u.path===t.path?a.replace(`/redirect${u.path}`):a.push(`/redirect${u.path}`)},o=()=>e(u);return document.body.addEventListener("click",()=>s.display="none"),{menuPos:s,contextRightMenu:n,refresh:l,rightMenuEl:r,closeOther:o}},Ke=()=>{const{getTags:e}=k(),{tagsList:t,cachedViews:a}=e,s=w(null),r=w([]),u=n=>n&&r.value.push(n);return N(()=>t.length,()=>D(()=>{!s.value||(s.value.update(),D(()=>{const n=r.value.filter(o=>o).reduce((o,d)=>o+d.offsetWidth+6,0);if(!s.value)return;const l=n-s.value.wrap.offsetWidth+70;l>0&&(s.value.wrap.scrollLeft=l)}))})),_e(()=>{r.value=[]}),{tagsList:t,scrollbar:s,layoutTagsItem:r,cachedViews:a,getTagsDom:u}};var te=v({name:"LayoutTags",setup(){const{removeAllTagNav:e,addCachedViews:t,removeTagNav:a}=k(),s=x(),r=u=>a({cPath:s.path,tagsList:u});return q(()=>{t({name:s.name,noCache:s.meta.noCache})}),T(T({removeTag:r,removeAllTagNav:e},Ke()),He())}});const Qe={class:"shadow border-b border-gray-100 px-3 overflow-hidden relative z-10"},Ye={class:"layout-tags-container whitespace-nowrap"},Je=["onContextmenu"],Ze={key:0,class:"rounded-full inline-block w-2 h-2 bg-white -ml-1 mr-1"},et=["onClick"];function tt(e,t,a,s,r,u){const n=c("router-link"),l=c("el-scrollbar");return i(),g(S,null,[h("div",Qe,[f(l,{ref:"scrollbar","wrap-class":"scrollbar-wrapper"},{default:p(()=>[h("div",Ye,[(i(!0),g(S,null,I(e.tagsList,o=>(i(),g("span",{key:o.path,ref:e.getTagsDom,class:E(["border border-gray-200 px-2 py-1 mx-1 cursor-pointer",{"layout-tags-active":o.isActive}]),onContextmenu:Q(d=>e.contextRightMenu(o,d),["prevent"])},[o.isActive?(i(),g("i",Ze)):C("",!0),f(n,{to:o.path},{default:p(()=>[M($(o.title),1)]),_:2},1032,["to"]),e.tagsList.length>1?(i(),g("i",{key:1,class:"el-icon-close text-xs hover:bg-gray-300 hover:text-white rounded-full leading-3 p-0.5 ml-1 -mr-1",onClick:d=>e.removeTag(o)},null,8,et)):C("",!0)],42,Je))),128))])]),_:1},512)]),h("ul",{ref:"rightMenuEl",class:"border border-gray-200 absolute w-24 leading-none bg-white shadow-md rounded-lg py-0.5 z-10",style:be(e.menuPos)},[h("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:t[0]||(t[0]=(...o)=>e.refresh&&e.refresh(...o))},"\u5237\u65B0"),h("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:t[1]||(t[1]=(...o)=>e.closeOther&&e.closeOther(...o))},"\u5173\u95ED\u5176\u5B83"),h("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:t[2]||(t[2]=(...o)=>e.removeAllTagNav&&e.removeAllTagNav(...o))},"\u5173\u95ED\u6240\u6709")],4)],64)}te.render=tt;var ne=v({name:"Layout",components:{LayoutContent:O,LayoutMenubar:A,LayoutNavbar:j,LayoutTags:te},setup(){const{changeDeviceWidth:e,changeCollapsed:t,getMenubar:a,getSetting:s}=k();return q(async()=>{e();const r=ce(300);let u=async function(){await r(),e()};window.addEventListener("resize",u,!0)}),{getMenubar:a,getSetting:s,changeCollapsed:t,icon:ee}}});const nt={class:"layout flex h-screen"},st={class:"layout-sidebar-logo flex h-12 relative flex-center shadow-lg"},ot=["src"],at={key:0,class:"pl-2"},rt={class:"layout-sidebar-menubar flex flex-1 overflow-hidden"},lt={class:"layout-main flex flex-1 flex-col overflow-x-hidden overflow-y-auto"},ut={class:"layout-main-navbar flex justify-between items-center h-12 shadow-sm overflow-hidden relative z-10"},it={key:0,class:"layout-main-tags h-8 leading-8 text-sm text-gray-600 relative"},ct={class:"layout-main-content flex-1 overflow-hidden"};function dt(e,t,a,s,r,u){const n=c("layout-menubar"),l=c("el-scrollbar"),o=c("layout-navbar"),d=c("layout-tags"),m=c("layout-content");return i(),g("div",nt,[h("div",{class:E(["layout-sidebar-mask fixed w-screen h-screen bg-black bg-opacity-25 z-20",{hidden:e.getMenubar.status!==2}]),onClick:t[0]||(t[0]=(...b)=>e.changeCollapsed&&e.changeCollapsed(...b))},null,2),e.getSetting.mode==="vertical"||e.getMenubar.isPhone?(i(),g("div",{key:0,class:E(["layout-sidebar flex flex-col h-screen transition-width duration-200 shadow",{"w-64":e.getMenubar.status===0||e.getMenubar.status===2,"w-0":e.getMenubar.status===3,"w-16":e.getMenubar.status===1,"absolute z-30":e.getMenubar.status===2||e.getMenubar.status===3}])},[h("div",st,[h("img",{class:"w-8 h-8",src:e.icon},null,8,ot),e.getMenubar.status===0||e.getMenubar.status===2?(i(),g("span",at,$(e.ImportMetaEnv.VITE_APP_TITLE),1)):C("",!0)]),h("div",rt,[f(l,{"wrap-class":"scrollbar-wrapper"},{default:p(()=>[f(n)]),_:1})])],2)):C("",!0),h("div",lt,[h("div",ut,[f(o)]),e.getSetting.showTags?(i(),g("div",it,[f(d)])):C("",!0),h("div",ct,[f(m)])])])}ne.render=dt;ne.__scopeId="data-v-d62390bc";export{ne as default};
