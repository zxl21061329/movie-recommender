import{c as D,d as u}from"./index.5c0afbab.js";import{r as d,I as w,q as a,A as o,C as t,F as x,G as l,Q as p,P as v,D as C,N as I,O as L}from"./element-plus.82ea873e.js";const h=c=>(I("data-v-d3fe54d0"),c=c(),L(),c),T={class:"container"},S=h(()=>t("h1",null,"\u5F71\u5355\u5217\u8868",-1)),b={class:"content"},B={class:"sidebar"},M=h(()=>t("h3",null,"\u5F71\u5355\u7C7B\u578B",-1)),N=["onClick"],j={class:"movie-list"},q=["onClick"],z=["src"],A={class:"info"},F={class:"description"},P={key:1},V={setup(c){const m=D(),r=d([]),n=d([]),i=d("");w(async()=>{await y(),await _()});const y=async()=>{try{const e=await u.get("/movie_list_types/");console.log("\u5F71\u5355\u7C7B\u578B API \u8FD4\u56DE\u6570\u636E:",e.data),e.data&&e.data.Data&&e.data.Data.types&&(n.value=e.data.Data.types,i.value=n.value[0]||"")}catch(e){console.error("\u83B7\u53D6\u5F71\u5355\u7C7B\u578B\u5931\u8D25:",e)}},_=async()=>{try{const e=await u.post("/movie_lists/",{page:1,pagesize:10,type:i.value});e.data&&e.data.Data&&e.data.Data.results?r.value=e.data.Data.results:console.error("\u8FD4\u56DE\u7684\u6570\u636E\u7ED3\u6784\u4E0D\u7B26\u5408\u9884\u671F:",e.data)}catch(e){console.error("\u83B7\u53D6\u5F71\u5355\u5217\u8868\u5931\u8D25:",e)}},f=async e=>{i.value=e,await _()},g=e=>{m.push({name:"MovieListDetail",params:{listId:e}})};return(e,$)=>(a(),o("div",T,[S,t("div",b,[t("div",B,[M,t("ul",null,[x(l(n.value),1),(a(!0),o(p,null,v(n.value,s=>(a(),o("li",{key:s,onClick:k=>f(s),class:C({active:s===i.value})},l(s),11,N))),128))])]),t("div",j,[r.value.length>0?(a(!0),o(p,{key:0},v(r.value,s=>(a(),o("div",{key:s.id,class:"list-card",onClick:k=>g(s.id)},[t("img",{src:"/media/"+s.image_link,class:"cover"},null,8,z),t("div",A,[t("h3",null,l(s.name),1),t("p",F,l(s.description),1)])],8,q))),128)):(a(),o("p",P,"\u6682\u65E0\u5F71\u5355\u6570\u636E"))])])]))}};V.__scopeId="data-v-d3fe54d0";export{V as default};
