import{c as D,d as u}from"./index.669b301c.js";import{r,I as w,q as a,A as o,C as t,Q as p,P as v,D as C,G as d,N as L,O as x}from"./element-plus.82ea873e.js";const h=c=>(L("data-v-50b54d44"),c=c(),x(),c),I={class:"container"},T=h(()=>t("h1",null,"\u5F71\u5355\u5217\u8868",-1)),b={class:"content"},S={class:"sidebar"},B=h(()=>t("h3",null,"\u5F71\u5355\u7C7B\u578B",-1)),M=["onClick"],j={class:"movie-list"},q=["onClick"],z=["src"],N={class:"info"},$={class:"description"},A={key:1},E={setup(c){const m=D(),n=r([]),l=r([]),i=r("");w(async()=>{await y(),await _()});const y=async()=>{try{const e=await u.get("/movie_list_types/");e.data&&e.data.types&&(l.value=e.data.types,i.value=l.value[0]||"")}catch(e){console.error("\u83B7\u53D6\u5F71\u5355\u7C7B\u578B\u5931\u8D25:",e)}},_=async()=>{try{const e=await u.post("/movie_lists/",{page:1,pagesize:10,type:i.value});e.data&&e.data.Data&&e.data.Data.results?n.value=e.data.Data.results:console.error("\u8FD4\u56DE\u7684\u6570\u636E\u7ED3\u6784\u4E0D\u7B26\u5408\u9884\u671F:",e.data)}catch(e){console.error("\u83B7\u53D6\u5F71\u5355\u5217\u8868\u5931\u8D25:",e)}},k=async e=>{i.value=e,await _()},f=e=>{m.push({name:"MovieListDetail",params:{listId:e}})};return(e,F)=>(a(),o("div",I,[T,t("div",b,[t("div",S,[B,t("ul",null,[(a(!0),o(p,null,v(l.value,s=>(a(),o("li",{key:s,onClick:g=>k(s),class:C({active:s===i.value})},d(s),11,M))),128))])]),t("div",j,[n.value.length>0?(a(!0),o(p,{key:0},v(n.value,s=>(a(),o("div",{key:s.id,class:"list-card",onClick:g=>f(s.id)},[t("img",{src:"/media/"+s.image_link,class:"cover"},null,8,z),t("div",N,[t("h3",null,d(s.name),1),t("p",$,d(s.description),1)])],8,q))),128)):(a(),o("p",A,"\u6682\u65E0\u5F71\u5355\u6570\u636E"))])])]))}};E.__scopeId="data-v-50b54d44";export{E as default};
